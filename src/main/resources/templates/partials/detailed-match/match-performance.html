<div th:fragment="match-performance"
     th:with="match=${matchInfo.getMatch()},
              teams=${match.getTeam()},
              blueTeam=${teams[0]},
              redTeam=${teams[1]},
              blueData=${blueTeam.getTotalDamage},
              redData=${redTeam.getTotalDamage},
              blueDataFormatted=${#numbers.formatDecimal(blueData, 1, 'COMMA', 0, 'POINT')},
              redDataFormatted=${#numbers.formatDecimal(redData, 1, 'COMMA', 0, 'POINT')}
"
>
    <div class="d-flex justify-content-between align-content-center gap-3">
        <div th:replace="~{partials/detailed-match/match-performance :: team('Blue Team', ${0})}"></div>

        <div th:replace="~{partials/detailed-match/match-performance :: performanceDial('Damage Dealt', ${redData}, ${blueData}, ${redDataFormatted}, ${blueDataFormatted})}"></div>

        <div th:replace="~{partials/detailed-match/match-performance :: team('Red Team', ${1})}"></div>
    </div>
</div>

<div th:fragment="redPlayer(participantData)"
     th:with="participantDataFormatted=${#numbers.formatDecimal(participantData, 1, 'COMMA', 0, 'POINT')}"
     class="d-flex justify-content-end gap-1"
>
    <div class="player-stat"
         th:data-info-player="${participantData}"
         th:data-info-best="${participantData * 2}"
    >
        <svg class="stat-rect">
            <rect class="back-rect"/>
            <rect class="front-rect front-rect-red"/>
        </svg>
        <div class="player-info d-flex justify-content-end">
            <p class="color-neutral-light fs-200 fw-bold mb-0 pe-2" th:text="${participantDataFormatted}">0</p>
        </div>
    </div>
    <img th:replace="~{partials/icons/champion-icon :: small(100)}">
</div>

<div th:fragment="bluePlayer(participantData)"
     th:with="participantDataFormatted=${#numbers.formatDecimal(participantData, 1, 'COMMA', 0, 'POINT')}"
     class="d-flex gap-1"
>
    <img th:replace="~{partials/icons/champion-icon :: small(100)}">
    <div class="player-stat"
         th:data-info-player="${participantData}"
         th:data-info-best="${participantData * 2}"
    >
        <svg class="stat-rect">
            <rect class="back-rect"/>
            <rect class="front-rect front-rect-blue"/>
        </svg>
        <div class="player-info d-flex justify-content-start">
            <p class="color-neutral-light fs-200 fw-bold mb-0 ps-2" th:text="${participantDataFormatted}">0</p>
        </div>
    </div>
</div>

<div th:fragment="team(teamColor, teamNumber)"
     th:with="participants=${matchInfo.getMatch().getParticipant()},
              blueTeam=${100},
              redTeam=${200},
              team=${(teamNumber + 1) * 100},
              isBlueTeam=${team == blueTeam},
              isRedTeam=${team == redTeam}"
     class="d-flex flex-column justify-content-between"
>
    <div th:each="participant : ${participants}"
         class="p-2"
         th:if="${participant.teamId == team}"
    >
        <th:block th:if="${isBlueTeam}">
            <div th:replace="~{partials/detailed-match/match-performance :: bluePlayer(${participant.getTotalDamageDealtToChampions()})}"></div>
        </th:block>

        <th:block th:if="${isRedTeam}">
            <div th:replace="~{partials/detailed-match/match-performance :: redPlayer(${participant.getTotalDamageDealtToChampions()})}"></div>
        </th:block>
    </div>
</div>

<div th:fragment="performanceDial(dialName,redData, blueData, redDataFormatted, blueDataFormatted)"
     class="stat-block d-flex justify-content-center align-items-center"
     th:data-info-red="${redData}"
     th:data-info-blue="${blueData}"
>
    <div class="stat-info d-flex flex-column justify-content-center align-items-center rounded-circle">
        <p class="color-primary-blue fs-200 fw-bold mb-0" th:text="${blueDataFormatted}">0</p>
        <p class="color-neutral-light mb-0" th:text="${dialName}"></p>
        <p class="color-primary-red fs-200 fw-bold mb-0" th:text="${redDataFormatted}">0</p>
    </div>
    <svg class="stat-ring d-flex justify-content-center align-items-center">
        <circle class="back-ring"/>
        <circle class="front-ring"/>
    </svg>
</div>
