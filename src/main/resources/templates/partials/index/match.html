<div th:fragment="match-buttons(gameMode)"
      th:with="matchIsSaved=${matchInfo.getMatch().isSaved()},
               matchType=${matchInfo.getMatch().getGameMode()},
               isGameMode=${matchType == gameMode}"
>
  <th:block th:if="${matchIsSaved && (isGameMode || gameMode == 'ALL')}">
    <button th:replace="~{partials/index/match.html :: saved-match}"></button>
  </th:block>

  <th:block th:if="${!matchIsSaved && (gameMode == 'NEW' || gameMode == 'ALL')}">
    <button th:replace="~{partials/index/match.html :: new-match}"></button>
  </th:block>
</div>

<div th:fragment="saved-match"
     th:with="gameId=${matchInfo.getMatch().getGameId()},
              friendWon=${matchInfo.isFriendWin()}"
     th:id="${'accordion' + gameId}"
     class="accordion mb-3"
>
  <div class="accordion-eventItem rounded"
       th:classappend="${friendWon ? 'card-bg-win' : 'card-bg-loss'}"
  >
    <button th:replace="~{partials/index/match-button.html :: accordion-button}"></button>
    <div th:replace="~{partials/index/match-body.html :: accordion-body}"></div>
  </div>
</div>

<button th:fragment="new-match"
        th:with="gameId=${matchInfo.getMatch().getGameId()},
                 friends=${matchInfo.getFriends()}"
        th:id="${'accordion' + gameId}"
        class="card card-bg w-100 mb-3 ps-3 match border-0"
>
  <div class="card-body border-0 d-flex justify-content-between align-items-center">
    <div>
      <p class="color-neutral-light fs-400 my-0 non-selectable">Click to load match</p>
    </div>

    <div>
      <th:block th:each="friend : ${friends}">
        <img th:replace="~{partials/icons/friend-icon.html :: image}">
      </th:block>
    </div>
  </div>
</button>